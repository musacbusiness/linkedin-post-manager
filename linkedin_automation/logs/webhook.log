============================================================
LinkedIn Revision Webhook Server (Enhanced)
============================================================

Starting server on http://localhost:5050

Available Endpoints:
  Button (single):      http://localhost:5050/revise/{record_id}
  Button (all):         http://localhost:5050/revise-all
  Automation:           http://localhost:5050/automation/revise

Airtable Integration Options:
  1. Button URL:        CONCATENATE('http://localhost:5050/revise/', RECORD_ID())
  2. Automation URL:    http://localhost:5050/automation/revise
     (Send POST with: {"record_id": "<record_id>"})

Press Ctrl+C to stop
============================================================
 * Serving Flask app 'webhook_revise_automation'
 * Debug mode: off
2025-12-05 20:34:01,242 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://192.168.4.112:5050
2025-12-05 20:34:01,242 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-12-05 21:04:37,397 - werkzeug - INFO - 127.0.0.1 - - [05/Dec/2025 21:04:37] "GET /health HTTP/1.1" 200 -
2025-12-05 21:06:53,908 - __main__ - INFO - Received revision request for record: recOk0DvALhAY3cYu
/Users/musacomma/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-12-05 21:06:55,026 - content_revisions - INFO - Processing image revision for record recOk0DvALhAY3cYu
2025-12-05 21:06:56,053 - anthropic._base_client - INFO - Retrying request to /v1/messages in 0.433722 seconds
2025-12-05 21:07:03,675 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-12-05 21:07:03,694 - generate_images - INFO - Requesting image generation from Replicate
2025-12-05 21:07:04,036 - generate_images - INFO - Prediction created: h0g6y6n59nrma0cty5mvpfdxag, waiting for completion...
2025-12-05 21:07:45,293 - generate_images - INFO - Image generated successfully
2025-12-05 21:07:45,296 - content_revisions - INFO - Regenerated image with new prompt
2025-12-05 21:07:46,134 - content_revisions - INFO - Updated image for record recOk0DvALhAY3cYu
2025-12-05 21:07:46,556 - content_revisions - INFO - Logged revision and cleared prompt for record recOk0DvALhAY3cYu
2025-12-05 21:07:46,557 - content_revisions - INFO - Processed 1 revision requests
2025-12-05 21:07:46,562 - werkzeug - INFO - 127.0.0.1 - - [05/Dec/2025 21:07:46] "GET /revise/recOk0DvALhAY3cYu HTTP/1.1" 200 -
